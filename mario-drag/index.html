<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img {
            height: 200px;
        }

        body {
            margin: 0;
            touch-action: none;
        }

        #sidewalk {
            background-color: gray;
            height: 50px;
            margin: -30px;
        }
    </style>
</head>

<body>
    <img src="./mario.gif" alt="" id="avatar">
    <div id="sidewalk"></div>
    <script>
        let dragStart = false;
        let originX = null;
        let offSetX = 0;

        //the function will recieve the event object once the 
        //querySelector is triggered 
        function onDragStart(event) {
            event.preventDefault();
            //here we save the value of the x position of mario
            originX = event.clientX;
            dragStart = true;
            
            event.currentTarget.setPointerCapture(event.pointerId)
        }
        function onDragEnd(event) {
            dragStart = false
            offSetX += event.clientX - originX
        }
        function onDragMove(event) {
            if (!dragStart) {
                return;
            }

            event.preventDefault();
            // const currentX = event.clientX;
            // const delta = currentX - originX;
            // mario.style.transform = `translateX(${delta}px)`

            const deltaX = event.clientX - originX;
            const translateX = offSetX + deltaX;
            event.currentTarget.style.transform = `translateX(${translateX}px)`
        }


        //here we add references tothe eventLisenters 
        //and give them refference fx. onDragStart 
        //then we make functions above or we can make them 
        //anywhere with the same refference name. 
        //Once the event lisetener is triggerd, the function 
        //will be called 
        const mario = document.querySelector("#avatar")
        mario.addEventListener('pointerdown', onDragStart)
        mario.addEventListener('pointerup', onDragEnd)
        //this is when we press down and hold/move 
        mario.addEventListener('pointermove', onDragMove)
    </script>
</body>

</html>